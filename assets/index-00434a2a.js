function h(e){return e===null?"null":e!==Object(e)?typeof e:{}.toString.call(e).slice(8,-1).toLowerCase()}function f(e){return h(e)!=="string"?!0:!e.length}function E(e="",t,r){if(f(e))return!1;const n=e.charCodeAt(0);return t<=n&&n<=r}const x={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},H={HEPBURN:"hepburn"},te={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:H.HEPBURN},ne=65,re=90,L=12353,se=12438,M=12449,ie=12540,ae=19968,oe=40879,ce=12293,ue=12540,fe=12539,le=[0,127],Ae=[[256,257],[274,275],[298,299],[332,333],[362,363]],Oe=[[8216,8217],[8220,8221]],he=[le,...Ae],Ee=[[32,47],[58,63],[91,96],[123,126],...Oe];var m=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ge(e,t){return!!(e===t||m(e)&&m(t))}function je(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!ge(e[r],t[r]))return!1;return!0}function P(e,t){t===void 0&&(t=je);var r=null;function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var a=e.apply(this,s);return r={lastResult:a,lastArgs:s,lastThis:this},a}return n.clear=function(){r=null},n}var C=Object.prototype.hasOwnProperty;function w(e,t,r){for(r of e.keys())if(O(r,t))return r}function O(e,t){var r,n,s;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&O(e[n],t[n]););return n===-1}if(r===Set){if(e.size!==t.size)return!1;for(n of e)if(s=n,s&&typeof s=="object"&&(s=w(t,s),!s)||!t.has(s))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e)if(s=n[0],s&&typeof s=="object"&&(s=w(t,s),!s)||!O(n[1],t.get(s)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(C.call(e,r)&&++n&&!C.call(t,r)||!(r in t)||!O(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}const y=(e={})=>Object.assign({},te,e);function v(e,t,r){const n=t;function s(o,c){if(o[c]!==void 0)return Object.assign({"":o[""]+c},o[c])}function i(o,c){const u=o.charAt(0);return a(Object.assign({"":u},n[u]),o.slice(1),c,c+1)}function a(o,c,u,l){if(!c)return r||Object.keys(o).length===1?o[""]?[[u,l,o[""]]]:[]:[[u,l,null]];if(Object.keys(o).length===1)return[[u,l,o[""]]].concat(i(c,l));const A=s(o,c.charAt(0));return A===void 0?[[u,l,o[""]]].concat(i(c,l)):a(A,c.slice(1),u,l+1)}return i(e,0)}function _(e){return Object.entries(e).reduce((t,[r,n])=>{const s=h(n)==="string";return t[r]=s?{"":n}:_(n),t},{})}function D(e,t){return t.split("").reduce((r,n)=>(r[n]===void 0&&(r[n]={}),r[n]),e)}function J(e={}){const t={};return h(e)==="object"&&Object.entries(e).forEach(([r,n])=>{let s=t;r.split("").forEach(i=>{s[i]===void 0&&(s[i]={}),s=s[i]}),s[""]=n}),function(n){const s=JSON.parse(JSON.stringify(n));function i(a,o){return a===void 0||h(a)==="string"?o:Object.entries(o).reduce((c,[u,l])=>(c[u]=i(a[u],l),c),a)}return i(s,t)}}function B(e,t){return t?h(t)==="function"?t(e):J(t)(e):e}const Ne={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},Se={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},k={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},G={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},$={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},U={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},ye=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},$,G),de={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},Te={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function pe(){const e=_(Ne),t=s=>D(e,s);Object.entries(k).forEach(([s,i])=>{Object.entries(G).forEach(([a,o])=>{t(s+a)[""]=i+o})}),Object.entries(Se).forEach(([s,i])=>{t(s)[""]=i}),Object.entries(Te).forEach(([s,i])=>{Object.entries($).forEach(([a,o])=>{const c=t(s+a);c[""]=i+o})}),["n","n'","xn"].forEach(s=>{t(s)[""]="ん"}),e.c=JSON.parse(JSON.stringify(e.k)),Object.entries(U).forEach(([s,i])=>{const a=s.slice(0,s.length-1),o=s.charAt(s.length-1),c=t(a);c[o]=JSON.parse(JSON.stringify(t(i)))});function r(s){return[...Object.entries(U),["c","k"]].reduce((i,[a,o])=>s.startsWith(o)?i.concat(s.replace(o,a)):i,[])}Object.entries(ye).forEach(([s,i])=>{const a=A=>A.charAt(A.length-1),o=A=>A.slice(0,A.length-1),c=`x${s}`,u=t(c);u[""]=i;const l=t(`l${o(s)}`);l[a(s)]=u,r(s).forEach(A=>{["l","x"].forEach(I=>{const ee=t(I+o(A));ee[a(A)]=t(I+s)})})}),Object.entries(de).forEach(([s,i])=>{t(s)[""]=i});function n(s){return Object.entries(s).reduce((i,[a,o])=>(a?i[a]=n(o):i[a]=`っ${o}`,i),{})}return[...Object.keys(k),"c","y","w","j"].forEach(s=>{const i=e[s];i[s]=n(i)}),delete e.n.n,Object.freeze(JSON.parse(JSON.stringify(e)))}let d=null;function Ke(){return d==null&&(d=pe()),d}const Re=J({wi:"ゐ",we:"ゑ"});function Le(e){const t=JSON.parse(JSON.stringify(e));return t.n.n={"":"ん"},t.n[" "]={"":"ん"},t}function Me(e=""){return f(e)?!1:E(e,ne,re)}function g(e=""){return f(e)?!1:e.charCodeAt(0)===ue}function Y(e=""){return f(e)?!1:e.charCodeAt(0)===fe}function q(e=""){return f(e)?!1:g(e)?!0:E(e,L,se)}function j(e=""){const t=[];return e.split("").forEach(r=>{if(g(r)||Y(r))t.push(r);else if(q(r)){const n=r.charCodeAt(0)+(M-L),s=String.fromCharCode(n);t.push(s)}else t.push(r)}),t.join("")}const V=P((e,t,r)=>{let n=Ke();return n=e?Le(n):n,n=t?Re(n):n,r&&(n=B(n,r)),n},O);function K(e="",t={},r){let n;return r?n=t:(n=y(t),r=V(n.IMEMode,n.useObsoleteKana,n.customKanaMapping)),_e(e,n,r).map(s=>{const[i,a,o]=s;if(o===null)return e.slice(i);const c=n.IMEMode===x.HIRAGANA,u=n.IMEMode===x.KATAKANA||[...e.slice(i,a)].every(Me);return c||!u?o:j(o)}).join("")}function _e(e="",t={},r){const{IMEMode:n,useObsoleteKana:s,customKanaMapping:i}=t;return r||(r=V(n,s,i)),v(e.toLowerCase(),r,!n)}function be(e=""){return f(e)?!1:he.some(([t,r])=>E(e,t,r))}function b(e="",t){const r=h(t)==="regexp";return f(e)?!1:[...e].every(n=>{const s=be(n);return r?s||t.test(n):s})}function R(e=""){return E(e,M,ie)}function Ie(e=""){return f(e)?!1:[...e].every(q)}function W(e=""){return f(e)?!1:[...e].every(R)}function xe(e=""){return f(e)?!1:e.charCodeAt(0)===ce}function me(e=""){return E(e,ae,oe)||xe(e)}function Ce(e=""){return f(e)?!1:[...e].every(me)}function X(e="",t={passKanji:!0}){const r=[...e];let n=!1;return t.passKanji||(n=r.some(Ce)),(r.some(Ie)||r.some(W))&&r.some(b)&&!n}const we=(e,t)=>g(e)&&t<1,ke=(e,t)=>g(e)&&t>0,Ue=e=>["ヶ","ヵ"].includes(e),ze={a:"あ",i:"い",u:"う",e:"え",o:"う"};function N(e="",t,{isDestinationRomaji:r,convertLongVowelMark:n}={}){let s="";return e.split("").reduce((i,a,o)=>{if(Y(a)||we(a,o)||Ue(a))return i.concat(a);if(n&&s&&ke(a,o)){const c=t(s).slice(-1);return R(e[o-1])&&c==="o"&&r?i.concat("お"):i.concat(ze[c])}if(!g(a)&&R(a)){const c=a.charCodeAt(0)+(L-M),u=String.fromCharCode(c);return s=u,i.concat(u)}return s="",i.concat(a)},[]).join("")}let T=null;const He={あ:"a",い:"i",う:"u",え:"e",お:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",さ:"sa",し:"shi",す:"su",せ:"se",そ:"so",た:"ta",ち:"chi",つ:"tsu",て:"te",と:"to",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",は:"ha",ひ:"hi",ふ:"fu",へ:"he",ほ:"ho",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",や:"ya",ゆ:"yu",よ:"yo",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ざ:"za",じ:"ji",ず:"zu",ぜ:"ze",ぞ:"zo",だ:"da",ぢ:"ji",づ:"zu",で:"de",ど:"do",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",ゔぁ:"va",ゔぃ:"vi",ゔ:"vu",ゔぇ:"ve",ゔぉ:"vo"},Pe={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~",ー:"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},ve=["あ","い","う","え","お","や","ゆ","よ"],p={ゃ:"ya",ゅ:"yu",ょ:"yo"},De={ぃ:"yi",ぇ:"ye"},Je={ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},Be=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],Ge={し:"sh",ち:"ch",じ:"j",ぢ:"j"},$e={っ:"",ゃ:"ya",ゅ:"yu",ょ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},z={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function Ye(){return T==null&&(T=Ve()),T}function qe(e){switch(e){case H.HEPBURN:return Ye();default:return{}}}function Ve(){const e=_(He),t=n=>D(e,n),r=(n,s)=>{t(n)[""]=s};return Object.entries(Pe).forEach(([n,s])=>{t(n)[""]=s}),[...Object.entries(p),...Object.entries(Je)].forEach(([n,s])=>{r(n,s)}),Be.forEach(n=>{const s=t(n)[""][0];Object.entries(p).forEach(([i,a])=>{r(n+i,s+a)}),Object.entries(De).forEach(([i,a])=>{r(n+i,s+a)})}),Object.entries(Ge).forEach(([n,s])=>{Object.entries(p).forEach(([i,a])=>{r(n+i,s+a[1])}),r(`${n}ぃ`,`${s}yi`),r(`${n}ぇ`,`${s}e`)}),e.っ=F(e),Object.entries($e).forEach(([n,s])=>{r(n,s)}),ve.forEach(n=>{r(`ん${n}`,`n'${t(n)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(e)))}function F(e){return Object.entries(e).reduce((t,[r,n])=>{if(r)t[r]=F(n);else{const s=n.charAt(0);t[r]=Object.keys(z).includes(s)?z[s]+n:n}return t},{})}const Q=P((e,t)=>{let r=qe(e);return t&&(r=B(r,t)),r},O);function S(e="",t={},r){const n=y(t);return r||(r=Q(n.romanization,n.customRomajiMapping)),We(e,n,r).map(s=>{const[i,a,o]=s;return n.upcaseKatakana&&W(e.slice(i,a))?o.toUpperCase():o}).join("")}function We(e,t,r){r||(r=Q(t.romanization,t.customRomajiMapping));const n=Object.assign({},{isDestinationRomaji:!0},t);return v(N(e,S,n),r,!t.IMEMode)}function Z(e=""){return f(e)?!1:Ee.some(([t,r])=>E(e,t,r))}function Xe(e="",t={}){const r=y(t);if(r.passRomaji)return N(e,S,r);if(X(e,{passKanji:!0})){const n=N(e,S,r);return K(n.toLowerCase(),r)}return b(e)||Z(e)?K(e.toLowerCase(),r):N(e,S,r)}function Fe(e="",t={}){const r=y(t);if(r.passRomaji)return j(e);if(X(e)||b(e)||Z(e)){const n=K(e.toLowerCase(),r);return j(n)}return j(e)}export{K as a,Xe as b,Fe as t};
